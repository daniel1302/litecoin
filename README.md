# litecoin

## Testing

### 1. Docker image

#### Build the image:

Run the image and verify output.

```bash
docker build -t daniel1302/litecoin:latest . ;
docker run daniel1302/litecoin:latest;
```

#### Security scan for images

```bash
# Login to dockerhub
docker login;

# DockerHub
docker push daniel1302/litecoin:latest;
docker scan daniel1302/litecoin:latest;

# Anchore
# Ref: https://engine.anchore.io/docs/quickstart/
cd anchore;
docker-compose up -d;

# Add image to anchore
docker-compose exec api anchore-cli image add daniel1302/litecoin:latest;
# Wait until image is analyzed
docker-compose exec api anchore-cli image wait daniel1302/litecoin:latest;
# List packages
docker-compose exec api anchore-cli evaluate check daniel1302/litecoin:latest
# List all vulns
docker-compose exec api anchore-cli image vuln daniel1302/litecoin:latest all;
# Check pass
docker-compose exec api anchore-cli evaluate check daniel1302/litecoin:latest
```

##### Output

```
docker-compose exec api anchore-cli evaluate check daniel1302/litecoin:latest    

Image Digest: sha256:599234e210342cc2655a593f109cbc4e9d1a8242267e6c87374c2c38cdbb00b6
Full Tag: docker.io/daniel1302/litecoin:latest
Status: pass
Last Eval: 2021-08-08T14:31:30Z
Policy ID: 2c53a13c-1765-11e8-82ef-23527761d060
```

```
docker-compose exec api anchore-cli image content daniel1302/litecoin:latest os; 


Package                       Version                             Licenses                                                                                                                                                                                                                                                                                                                        
adduser                       3.118                               Unknown                                                                                                                                                                                                                                                                                                                         
apt                           2.2.4                               GPLv2+                                                                                                                                                                                                                                                                                                                          
base-files                    11.1                                Unknown                                                                                                                                                                                                                                                                                                                         
base-passwd                   3.5.51                              GPL-2 public-domain                                                                                                                                                                                                                                                                                                             
bash                          5.1-2+b3                            Unknown                                                                                                                                                                                                                                                                                                                         
bsdutils                      1:2.36.1-8                          BSD-2-clause BSD-3-clause BSD-4-clause GPL-2 GPL-2+ GPL-3+ LGPL LGPL-2+ LGPL-2.1+ LGPL-3+ MIT public-domain                                                                                                                                                                                                                     
coreutils                     8.32-4+b1                           Unknown                                                                                                                                                                                                                                                                                                                         
dash                          0.5.11+git20200708+dd9ef66-5        BSD-3-Clause BSD-3-clause Expat FSFUL FSFULLR GPL-2+ public-domain                                                                                                                                                                                                                                                              
debconf                       1.5.77                              BSD-2-clause                                                                                                                                                                                                                                                                                                                    
debian-archive-keyring        2021.1.1                            Unknown                                                                                                                                                                                                                                                                                                                         
debianutils                   4.11.2                              Unknown                                                                                                                                                                                                                                                                                                                         
diffutils                     1:3.7-5                             Unknown                                                                                                                                                                                                                                                                                                                         
dpkg                          1.20.9                              BSD-2-clause GPL-2 GPL-2+ public-domain-md5 public-domain-s-s-d                                                                                                                                                                                                                                                                 
e2fsprogs                     1.46.2-2                            Unknown                                                                                                                                                                                                                                                                                                                         
findutils                     4.8.0-1                             Unknown                                                                                                                                                                                                                                                                                                                         
gcc-10-base                   10.2.1-6                            Unknown                                                                                                                                                                                                                                                                                                                         
gcc-9-base                    9.3.0-22                            LGPL-2.1+                                                                                                                                                                                                                                                                                                                       
gpgv                          2.2.27-2                            BSD-3-clause CC0-1.0 Expat GPL-3+ LGPL-2.1+ LGPL-3+ RFC-Reference TinySCHEME permissive                                                                                                                                                                                                                                         
grep                          3.6-1                               GPL-3+                                                                                                                                                                                                                                                                                                                          
gzip                          1.10-4                              FSF-manpages GFDL-1.3+-no-invariant GPL-3+                                                                                                                                                                                                                                                                                      
hostname                      3.23                                Unknown                                                                                                                                                                                                                                                                                                                         
init-system-helpers           1.60                                BSD-3-clause GPL-2+                                                                                                                                                                                                                                                                                                             
libacl1                       2.2.53-10                           GPL-2+ LGPL-2+                                                                                                                                                                                                                                                                                                                  
libapt-pkg6.0                 2.2.4                               GPLv2+                                                                                                                                                                                                                                                                                                                          
libattr1                      1:2.4.48-6                          GPL-2+ LGPL-2+                                                                                                                                                                                                                                                                                                                  
libaudit-common               1:3.0-2                             GPL-2 LGPL-2.1                                                                                                                                                                                                                                                                                                                  
libaudit1                     1:3.0-2                             GPL-2 LGPL-2.1                                                                                                                                                                                                                                                                                                                  
libblkid1                     2.36.1-8                            BSD-2-clause BSD-3-clause BSD-4-clause GPL-2 GPL-2+ GPL-3+ LGPL LGPL-2+ LGPL-2.1+ LGPL-3+ MIT public-domain                                                                                                                                                                                                                     
libbz2-1.0                    1.0.8-4                             BSD-variant GPL-2                                                                                                                                                                                                                                                                                                               
libc-bin                      2.31-13                             Unknown                                                                                                                                                                                                                                                                                                                         
libc6                         2.31-13                             Unknown                                                                                                                                                                                                                                                                                                                         
libcap-ng0                    0.7.9-2.2+b1                        Unknown                                                                                                                                                                                                                                                                                                                         
libcom-err2                   1.46.2-2                            Unknown                                                                                                                                                                                                                                                                                                                         
libcrypt1                     1:4.4.18-4                          Unknown                                                                                                                                                                                                                                                                                                                         
libdb5.3                      5.3.28+dfsg1-0.8                    Unknown                                                                                                                                                                                                                                                                                                                         
libdebconfclient0             0.260                               Unknown                                                                                                                                                                                                                                                                                                                         
libext2fs2                    1.46.2-2                            Unknown                                                                                                                                                                                                                                                                                                                         
libffi7                       3.3-6                               Unknown                                                                                                                                                                                                                                                                                                                         
libgcc-s1                     10.2.1-6                            Unknown                                                                                                                                                                                                                                                                                                                         
libgcrypt20                   1.8.7-6                             Unknown                                                                                                                                                                                                                                                                                                                         
libgmp10                      2:6.2.1+dfsg-1                      Unknown                                                                                                                                                                                                                                                                                                                         
libgnutls30                   3.7.1-5                             Apache-2.0 BSD-3-Clause CC0 Expat GPLv3+ LGPLv2.1+ LGPLv3+_or_GPLv2+ The                                                                                                                                                                                                                                                        
libgpg-error0                 1.38-2                              BSD-3-clause GPL-3+ LGPL-2.1+ g10-permissive                                                                                                                                                                                                                                                                                    
libgssapi-krb5-2              1.18.3-6                            Unknown                                                                                                                                                                                                                                                                                                                         
libhogweed6                   3.7.3-1                             Expat GAP GPL-2 GPL-2+ GPL-3+ LGPL-2+ LGPL-3+ public-domain                                                                                                                                                                                                                                                                     
libidn2-0                     2.3.0-5                             GPL-2+ GPL-3+ LGPL-3+ Unicode                                                                                                                                                                                                                                                                                                   
libk5crypto3                  1.18.3-6                            Unknown                                                                                                                                                                                                                                                                                                                         
libkeyutils1                  1.6.1-2                             GPL-2+ LGPL-2+                                                                                                                                                                                                                                                                                                                  
libkrb5-3                     1.18.3-6                            Unknown                                                                                                                                                                                                                                                                                                                         
libkrb5support0               1.18.3-6                            Unknown                                                                                                                                                                                                                                                                                                                         
liblz4-1                      1.9.3-2                             BSD-2-clause GPL-2 GPL-2+                                                                                                                                                                                                                                                                                                       
liblzma5                      5.2.5-2                             Autoconf GPL-2 GPL-2+ LGPL-2.1+ PD PD-debian config-h noderivs permissive-fsf permissive-nowarranty probably-PD                                                                                                                                                                                                                 
libmount1                     2.36.1-8                            BSD-2-clause BSD-3-clause BSD-4-clause GPL-2 GPL-2+ GPL-3+ LGPL LGPL-2+ LGPL-2.1+ LGPL-3+ MIT public-domain                                                                                                                                                                                                                     
libnettle8                    3.7.3-1                             Expat GAP GPL-2 GPL-2+ GPL-3+ LGPL-2+ LGPL-3+ public-domain                                                                                                                                                                                                                                                                     
libnsl2                       1.3.0-2                             BSD-3-clause GPL-2+-autoconf-exception GPL-2+-libtool-exception GPL-3+-autoconf-exception LGPL-2.1 LGPL-2.1+ MIT permissive-autoconf-m4 permissive-autoconf-m4-no-warranty permissive-configure permissive-fsf permissive-makefile-in                                                                                           
libp11-kit0                   0.23.22-1                           BSD-3-Clause ISC ISC+IBM permissive-like-automake-output same-as-rest-of-p11kit                                                                                                                                                                                                                                                 
libpam-modules                1.4.0-9                             Unknown                                                                                                                                                                                                                                                                                                                         
libpam-modules-bin            1.4.0-9                             Unknown                                                                                                                                                                                                                                                                                                                         
libpam-runtime                1.4.0-9                             Unknown                                                                                                                                                                                                                                                                                                                         
libpam0g                      1.4.0-9                             Unknown                                                                                                                                                                                                                                                                                                                         
libpcre2-8-0                  10.36-2                             Unknown                                                                                                                                                                                                                                                                                                                         
libpcre3                      2:8.39-13                           Unknown                                                                                                                                                                                                                                                                                                                         
libseccomp2                   2.5.1-1                             LGPL-2.1                                                                                                                                                                                                                                                                                                                        
libselinux1                   3.1-3                               Unknown                                                                                                                                                                                                                                                                                                                         
libsemanage-common            3.1-1                               Unknown                                                                                                                                                                                                                                                                                                                         
libsemanage1                  3.1-1+b2                            Unknown                                                                                                                                                                                                                                                                                                                         
libsepol1                     3.1-1                               Unknown                                                                                                                                                                                                                                                                                                                         
libsmartcols1                 2.36.1-8                            BSD-2-clause BSD-3-clause BSD-4-clause GPL-2 GPL-2+ GPL-3+ LGPL LGPL-2+ LGPL-2.1+ LGPL-3+ MIT public-domain                                                                                                                                                                                                                     
libss2                        1.46.2-2                            Unknown                                                                                                                                                                                                                                                                                                                         
libssl1.1                     1.1.1k-1                            Unknown                                                                                                                                                                                                                                                                                                                         
libstdc++6                    10.2.1-6                            Unknown                                                                                                                                                                                                                                                                                                                         
libsystemd0                   247.3-6                             CC0-1.0 Expat GPL-2 GPL-2+ LGPL-2.1+ public-domain                                                                                                                                                                                                                                                                              
libtasn1-6                    4.16.0-2                            Unknown                                                                                                                                                                                                                                                                                                                         
libtinfo6                     6.2+20201114-2                      BSD-3-clause MIT/X11 X11                                                                                                                                                                                                                                                                                                        
libtirpc-common               1.3.1-1                             BSD-3-Clause GPL-2                                                                                                                                                                                                                                                                                                              
libtirpc3                     1.3.1-1                             BSD-3-Clause GPL-2                                                                                                                                                                                                                                                                                                              
libudev1                      247.3-6                             CC0-1.0 Expat GPL-2 GPL-2+ LGPL-2.1+ public-domain                                                                                                                                                                                                                                                                              
libunistring2                 0.9.10-4                            FreeSoftware GFDL-1.2+ GPL-2+ GPL-3+ LGPL-3+ MIT                                                                                                                                                                                                                                                                                
libuuid1                      2.36.1-8                            BSD-2-clause BSD-3-clause BSD-4-clause GPL-2 GPL-2+ GPL-3+ LGPL LGPL-2+ LGPL-2.1+ LGPL-3+ MIT public-domain                                                                                                                                                                                                                     
libxxhash0                    0.8.0-2                             BSD-2-clause GPL-2                                                                                                                                                                                                                                                                                                              
libzstd1                      1.4.8+dfsg-2.1                      BSD-3-clause Expat GPL-2 zlib                                                                                                                                                                                                                                                                                                   
login                         1:4.8.1-1                           Unknown                                                                                                                                                                                                                                                                                                                         
logsave                       1.46.2-2                            Unknown                                                                                                                                                                                                                                                                                                                         
lsb-base                      11.1.0                              BSD-3-clause GPL-2                                                                                                                                                                                                                                                                                                              
mawk                          1.3.4.20200120-2                    Unknown                                                                                                                                                                                                                                                                                                                         
mount                         2.36.1-8                            BSD-2-clause BSD-3-clause BSD-4-clause GPL-2 GPL-2+ GPL-3+ LGPL LGPL-2+ LGPL-2.1+ LGPL-3+ MIT public-domain                                                                                                                                                                                                                     
ncurses-base                  6.2+20201114-2                      BSD-3-clause MIT/X11 X11                                                                                                                                                                                                                                                                                                        
ncurses-bin                   6.2+20201114-2                      BSD-3-clause MIT/X11 X11                                                                                                                                                                                                                                                                                                        
passwd                        1:4.8.1-1                           Unknown                                                                                                                                                                                                                                                                                                                         
perl-base                     5.32.1-4                            Artistic Artistic-2 Artistic-dist BSD-3-clause BSD-3-clause-GENERIC BSD-3-clause-with-weird-numbering BSD-4-clause-POWERDOG BZIP DONT-CHANGE-THE-GPL Expat GPL-1+ GPL-2+ GPL-3+-WITH-BISON-EXCEPTION HSIEH-BSD HSIEH-DERIVATIVE LGPL-2.1 REGCOMP REGCOMP, RRA-KEEP-THIS-NOTICE SDBM-PUBLIC-DOMAIN TEXT-TABS Unicode ZLIB        
sed                           4.7-1                               Unknown                                                                                                                                                                                                                                                                                                                         
sysvinit-utils                2.96-7                              GPL-2+                                                                                                                                                                                                                                                                                                                          
tar                           1.34+dfsg-1                         Unknown                                                                                                                                                                                                                                                                                                                         
tzdata                        2021a-1                             Unknown                                                                                                                                                                                                                                                                                                                         
util-linux                    2.36.1-8                            BSD-2-clause BSD-3-clause BSD-4-clause GPL-2 GPL-2+ GPL-3+ LGPL LGPL-2+ LGPL-2.1+ LGPL-3+ MIT public-domain                                                                                                                                                                                                                     
zlib1g                        1:1.2.11.dfsg-2                     Zlib
```



### 2. Kubernetes

Template copied from: `https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/`.I have just adjusted it.

#### Starting app in k8s

```
kubectl apply -f k8s.yaml
```

#### Some outputs

```
➜  littlecoin git:(master) ✗ minikube version
minikube version: v1.16.0
commit: 9f1e482427589ff8451c4723b6ba53bb9742fbb1
➜  littlecoin git:(master) ✗ kubectl get statefulset
NAME       READY   AGE
litecoin   1/1     3m15s
➜  littlecoin git:(master) ✗ kubectl get pvc        
NAME                  STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
litecoin-litecoin-0   Bound    pvc-1327c67f-729e-4f10-a330-443ade3fca5e   1Gi        RWO            standard       3m19s
pg-data-claim         Bound    pvc-315d347a-be11-49d8-87f2-690ed76b70e2   500Mi      RWO            standard       223d
➜  littlecoin git:(master) ✗ kubectl get storageclass
NAME                 PROVISIONER                RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
standard (default)   k8s.io/minikube-hostpath   Delete          Immediate           false                  223d
```